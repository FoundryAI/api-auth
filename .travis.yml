language: node_js
install:
- npm update -g npm
- npm install -g typescript
- npm install

jobs:
  include:
  - stage: test
    script: npm test
    node_js:
    - '6'
    - '7'
    - '8'
  - stage: npm release
    node_js: '8'
    script: echo "Deploying to npm ..."
    deploy:
      provider: npm
      skip_cleanup: true
      email: engineering@foundry.ai
      api_key:
        secure: QAgsLrE5fdTwM4uBGB+bg2iab1xEIyXA5uXCgRlRYO0esiOfzoWpdeo2+gBa9aHURsyS5pgxnecxgV8hcXpfHSLaLEYDGvGnOpuD+rWanl3SQHT8MXnf0JhlO8wWNda6cscCvDwGOwC3ibmQaycY4nrMymJiDhjbwkoNg8aeq3NqWVgzb6sNhNt0lpNkYxcwjtXDuSrSEQy53p7WDj+lgs2ndn97orBCcSoBpUbPUib6XpuKeDc3dULG1q9SEuZt/u+qVRQZdCu1C49V9NLPVJTff4fyKg1cc8jdCzQxQQNYLU+Ji+KeY/tircna0ptHV89SLCZxRKIUNGMSo4gHfD1slwPiebH/YREmXmBwy6tJj0wjhJ1ep+jJnNVGnRAtKJRaLZr+7ixsYWH4s1XEoKTDie/gfPZr3qUdVh2b4lhMrHP3cd/XLNQ+o452BPfzcuxxorrU2uOHzwHhhR0Pwu2hDLWYV6rl87+NKtHMRhsjRIGyHbHSj9MyGSdscWi4t4mGRGIuL+HGRRpRsD5Tv+akxzNw8wNV8B4yjMGRXtUHs3PLvX6fJrThpKYjhi7aGtRVr3fqeZVxwvAd1otpkjjMB3JPWPYhpDXPav0C0zqUA+ybiVdVg4/TKcjI5lF52vg/GT0icja5aVFWC4iJnxFirJR5KGyCSzDaAmvi4UI=
      on:
        tags: true
